document.addEventListener("DOMContentLoaded",(()=>{const e={screen:"0",firstValue:null,waitingForSecondValue:!1,operator:null};function t(t){const r=parseFloat(e.screen);if(e.operator&&e.waitingForSecondValue)return e.operator=t,void console.log(e);if(null!==e.firstValue||isNaN(r)){if(e.operator){if("add"===e.operator){const t=e.firstValue+r;e.screen=String(t),e.firstValue=t}if("substraction"===e.operator){const t=e.firstValue-r;e.screen=String(t),e.firstValue=t}if("multi"===e.operator){const t=function(e,t){return 0===e||0===t?0:e*t}(e.firstValue,r);e.screen=String(t),e.firstValue=t}if("divide"===e.operator){const t=function(e,t){if(0===t)throw new Error("You cannot divide by zero");return e/t}(e.firstValue,r);e.screen=String(t),e.firstValue=t}}}else e.firstValue=r;e.waitingForSecondValue=!0,e.operator=t,console.log(e)}function r(){document.querySelector(".result").value=e.screen}r(),document.querySelector(".calc-cnt").querySelector("tbody").addEventListener("click",(n=>{if(!n.target.matches('input[type="button"]'))return;const o=n.target,{action:a}=o.dataset,{number:i}=o.dataset;return a?(t(o.dataset.action),void r()):i?(c=o.value,!0===e.waitingForSecondValue?(e.screen=c,e.waitingForSecondValue=!1):"0"===e.screen?e.screen=c:e.screen+=c,console.log(e),void r()):o.dataset.decimal?(function(t){if(!0===e.waitingForSecondValue)return e.screen="0.",void(e.waitingForSecondValue=!1);e.screen.includes(".")||(e.screen+=t)}(o.value),void r()):o.dataset.clear?(e.screen="0",e.firstValue=null,e.waitingForSecondValue=!1,e.operator=null,console.log(e),void r()):void(o.dataset.equals&&(t(o.dataset.action),r()));var c}))}));